<!DOCTYPE html>
<html>
<head>
    <title>International TradeFlows 2003-2022</title>
    <!-- Don't forget to link to your CSS and JavaScript files here -->
    <!-- Link to your CSS file -->
    <link rel="stylesheet" type="text/css" href="styles.css">
    <!-- Link to D3.js v5 library -->
    <script src="https://d3js.org/d3.v5.min.js"></script>
    <script src="https://d3js.org/d3-array.v2.min.js"></script>

   
    <!-- Link to Leaflet library -->
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.7.1/dist/leaflet.css" integrity="sha512-xodZBNTC5n17Xt2atTPuE1HxjVMSvLVW9ocqUKLsCC5CXdbqCmblAshOMAS6/keqq/sMZMZ19scR4PsZChSR7A==" crossorigin=""/>
    <script src="https://unpkg.com/leaflet@1.7.1/dist/leaflet.js" integrity="sha512-XQoYMqMTK8LvdxXYG3nZ448hOEQiglfqkJs1NOQV44cWnUrBc8PkAOcXy20w0vlaXaVUearIOBhiXZ5V3ynxwA==" crossorigin=""></script>

    <!-- Link to Font Awesome-->
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.1/css/all.min.css">
       <!-- Link to Topojson library -->
    <script src="https://unpkg.com/topojson@3"></script>

     <!-- Link to Slider library -->
<script src="https://unpkg.com/d3-simple-slider"></script>

 <!-- Link to Canvas -->
 <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.3.3/html2canvas.min.js"></script>

<script src="https://cdnjs.cloudflare.com/ajax/libs/canvg/1.5/canvg.min.js"></script>

</head>

<body>
    <nav class="navbar">        
        <div class="nav-title">

          <span class="main-title">International TradeFlows 2003-2022</span><br>
        <span class="sub-title">Your Gateway to International Trade and Market Analysis</span>
        </div>
                <!-- Add menu items here -->
                <div class="nav-links">
                <a href="index.html">Map</a>
                <!-- <a href="analysis.html">Analysis</a> -->
                <a href="sources.html">Data Sources</a>
                <a href="https://github.com/veroscience" target="_blank"> <i class="fab fa-github"></i></a>
                <a href="mailto:veronika@nuretdinova.com"><i class="far fa-envelope"></i></a>
            </div>
    </nav>

    
    <div class="row" style="height:70px; margin-left:20px; margin-right:15px; margin-top:5px; margin-bottom:5px; background-color: #C9ADA7;">
      <!-- Dropdowns -->
      <div style="text-align: center;">
        <div class="dropdown_head">filter by exporter</div>
        <div class="dropdown" id="export_filter">
          <select style="width: 120px;"></select>
        </div>
      </div>
      
      <div style="text-align: center;">
        <div class="dropdown_head">filter by importer</div>
        <div class="dropdown" id="import_filter">
          <select style="width: 120px;"></select>
        </div>
      </div>
      
      <div style="text-align: center; margin-right:20px">
        <div class="dropdown_head">filter by product</div>
        <div class="dropdown" id="product_filter">
          <select style="width: 120px;"></select>
        </div>
      </div>

          <!-- Sliders -->

        <div class="slider-info">
            <p style="width:25px; margin-top:15px; margin-left:20px">YEAR
             </p>
           <div id="yearSlider" style="width:100%">
       </div>

       <!-- The Modal -->

       </div> 

       <div class="slider-info">
        <p style="width:85px; margin-top:15px">
           Min Trade Volume, bn$
         </p>
       <div id="volumeSlider" style="width:100%">
   </div>   
</div> 

<div class="slider-info">
    <p style="width:65px; margin-top:15px">Arrows Thickness
     </p>
   <div id="thicknessSlider" style="width:50%">
</div>

<!-- The Modal -->

</div> 

   

   <!-- The Modal -->


        </div>


    <div class="container">

        <div class="column" style="width:35%;" id="column1">

    
            <div id="structure-section" class="section">
              
                <div class="header">
                    <h4>Trade Structure</h4>
                  </div>
                  <div class="section-content">
                    <h5 id="structure_header" style="margin-top:10px; margin-bottom:0px"></h5>
                    <h5 id="total_header" style="margin-top:10px; margin-bottom:0px"></h5>
                <div class="bar_chart" id="bar_chart">
                    <!-- Legend content here -->
                </div>
            </div>
        </div>

        <div id="top-exporters-section" class="section" style="display: none">
          <div class="header">
              <h4>Top 10 exporters</h4>
            </div>
            <div class="section-content">
              <h5 id="trend_product1" style="margin-top:10px; margin-bottom:0px"></h5>

          <div id="bar_chart_exporters">
              <!-- Dropdown content here -->
          </div>
         
      </div>
  </div>


  <div id="top-importers-section" class="section" style="display: none">
    <div class="header">
        <h4>Top 10 importers</h4>
      </div>
      <div class="section-content">
        <h5 id="trend_product2" style="margin-top:10px; margin-bottom:0px"></h5>

    <div id="bar_chart_importers">
        <!-- Dropdown content here -->
    </div>
   
</div>
</div>

            <div id="trend-section" class="section">
                <div class="header">
                    <h4>2013-2022 Export volumes, bn$</h4>
                  </div>
                  <div class="section-content">
                    <h5 id="trend_header" style="margin-top:5px; margin-bottom:0px"></h5>
                    <h5 id="trend_product3" style="margin-top:5px; margin-bottom:0px"></h5>
                    <h5 id="total_trend" style="margin-top:5px; margin-bottom:0px"></h5>
    
                <div id="trend_chart">
                    <!-- Dropdown content here -->
                </div>
               
            </div>
        </div>

    </div>

        <div class="column" style="flex: 60%;">
            <div class="row">
            
          <button id="resetZoom" style="position:absolute;margin-top:10px;right:3%;" title="Reset Zoom">
            <i class="fas fa-search-minus"></i> Reset Zoom
        </button>
        <button id="saveButton" style="position:absolute;margin-top:40px; right:3%;"> <i class="fa fa-download"></i> Save Image</button>

        <div id="loadingSpinner" style="display: none; position: absolute; z-index: 10; left: 50%; top:50%">
            <img src="icons/spinner.gif" alt="Loading..." style="width: 100px; " />
        </div>

            <div id="map_id" class="world-map" >
                <!-- Include your world map here. Depending on your method, it may involve embedding, using an image, or using a library. -->
            </div>
        </div>

        <!-- end of main column -->

       <!-- The Modal -->
<div id="myModal" class="modal">
    <!-- Modal content -->
      <span class="close">&times;</span>
      <p id="modal-info">Some text in the Modal..</p>
  </div>
       
        </div>
    </div>
    <!-- end of container -->
</div>
</body>
<script>
    
// Define the slider
var YearSlider = d3.sliderHorizontal()
  .min(2003)
  .max(2022)
  .step(1)
 .height(40)
 .width(200)
  .tickFormat(d3.format('.0f'))
  .tickValues([2003,2008,2013,2018,2022])
  .default(2022)

// Append it to your page
var g_slider = d3.select('#yearSlider').append('svg')
  .append('g').attr("id", "YearSlider")
  .attr('transform', 'translate(20,20)');

  g_slider.call(YearSlider);

      
// Define the slider
var VolumeSlider = d3.sliderHorizontal()
  .min(0.1)
  .max(100)
  .step(1)
 .height(40)
 .width(200)
  .tickFormat(d3.format(','))
  .tickValues(d3.range(10,101,10))
  .default(100)

// Append it to your page
var g_slider = d3.select('#volumeSlider').append('svg')
  .append('g').attr("id", "VolumeSlider")
  .attr('transform', 'translate(20,20)');

  g_slider.call(VolumeSlider);

  // Define the slider
  var  width_value=40;


var ThicknessSlider = d3.sliderHorizontal()
  .min(1)
  .max(200)
  .step(1)
 .height(50)
 .width(120)
  .tickFormat(d3.format(','))
  .tickValues([10,100, 200])
  .default(width_value)

// Append it to your page
var g_slider = d3.select('#thicknessSlider').append('svg')
  .append('g').attr("id", "ThicknessSlider")
  .attr('transform', 'translate(20,20)');

  g_slider.call(ThicknessSlider);

//////Dropdowns



</script>

<script src="world_map.js"></script>
<script src="data.js"></script>
<script src="draggable.js"></script>
<script src="save_image.js"></script>
</html>

